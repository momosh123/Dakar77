<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gestion des Matchs</title>
</head>
<body>
    <h1>Gestion des Matchs</h1>

    <!-- Formulaire pour Ajouter/Mettre à jour -->
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="hidden" name="match_id" id="matchId" value="">
        <button type="submit" name="add">Ajouter</button>
        <!-- Le bouton de mise à jour sera affiché dynamiquement via JavaScript -->
        <button type="submit" name="update" id="updateBtn" class="hidden">Mettre à jour</button>
    </form>

    <!-- Liste des matchs existants -->
    <h2>Liste des Matchs</h2>
    <ul>
        {% for match in matches %}
            <li>
                {{ match }} 
                <!-- Boutons pour modifier et supprimer -->
                <button onclick="prepareUpdateForm('{{ match.id }}', '{{ match.hometeam }}', '{{ match.awayteam }}', '{{ match.score }}')">Modifier</button>
                <form method="post" style="display: inline;">
                    {% csrf_token %}
                    <input type="hidden" name="match_id" value="{{ match.id }}">
                    <button type="submit" name="delete">Supprimer</button>
                </form>
            </li>
        {% endfor %}
    </ul>

    <script>
        function prepareUpdateForm(matchId, homeTeam, awayTeam, score) {
            // Pré-remplir le formulaire avec les données du match
            document.getElementById('matchId').value = matchId;
            // Assumer que vous avez des champs 'hometeam', 'awayteam', et 'score' dans votre formulaire
            document.querySelector('[name="hometeam"]').value = homeTeam;
            document.querySelector('[name="awayteam"]').value = awayTeam;
            document.querySelector('[name="score"]').value = score;

            // Afficher le bouton de mise à jour et masquer le bouton d'ajout
            document.getElementById('updateBtn').classList.remove('hidden');
            document.querySelector('[name="add"]').classList.add('hidden');
        }
    </script>

    <style>
        .hidden { display: none; }
    </style>
</body>
</html>
